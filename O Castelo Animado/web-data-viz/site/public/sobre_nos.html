<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Castelo Animado</title>

    <link rel="icon" href="CSS/assets/favicon.png">

    <link rel="stylesheet" href="CSS/sobre_nos_estilo.css">
    <link rel="stylesheet" href="CSS/popup_estilo.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Grandstander&family=Josefin+Sans:wght@100;200;300;400;500;600;700&family=Merriweather:wght@400;600;700&family=PT+Serif&family=Playfair+Display:wght@400;500;800&display=swap"
        rel="stylesheet">

</head>

<body>
    <!-- BANNER -->
    <header>
        <div class="banner">
            <nav class="degradê">
                <div class="container">
                    <a href="index.html"><img src="CSS/assets/logo.webp"></a>
                    <div class="links">
                        <ul class="navbar">
                            <li><a href="index.html" class="">Home</a></li>
                            <li><a href="sobre_nos.html" class="agora">Sobre Nós</a></li>
                            <!-- botao para popup -->

                            <button id="popup_botao" class="botao">Login/Cadastro</button>

                            <div id="popup_fundo" class="popup">
                                <div class="popup_conteudo">
                                    <div class="telaCadastro">
                                        <div class="formularioCadastro">
                                            <div class="conteudoCadastro">
                                                <h1>Cadastre sua Conta</h1>
                                                <div class="inputCadastro">
                                                    <input type="text" id="" placeholder="Nome" onchange="sem_borda(1)">
                                                    <input type="text" id="" placeholder="Sobrenome"
                                                        onchange="sem_borda(2)">
                                                    <input type="text" id="" placeholder="E-mail"
                                                        onchange="sem_borda(3)">
                                                    <input type="password" id="" placeholder="Senha"
                                                        onchange="sem_borda(4)">
                                                    <input type="password" id="" placeholder="Confirmação de Senha"
                                                        onchange="sem_borda(5)">
                                                </div>
                                                <button class="botaoCadastrar">Cadastrar</button>
                                                <p>Já tem uma conta? <b><a onclick="abrirLogin()"><u>Clique
                                                                aqui</u></a></b> para Entrar</p>
                                            </div>
                                        </div>
                                        <div class="imgCadastro">
                                            <span class="popup_fechar">&times;</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- fim do botao -->
                            <!-- inicio do login -->

                            <div id="popup_fundo_login" class="popupLogin">
                                <div class="popup_conteudo_login">
                                    <div class="telaLogin">
                                        <div class="formularioLogin">
                                            <div class="conteudoLogin">
                                                <h1>Olá Novamente!</h1>
                                                <div class="inputLogin">
                                                    <input type="text" placeholder="E-mail" onchange="sem_borda(6)">
                                                    <input type="password" placeholder="Senha" onchange="sem_borda(7)">
                                                </div>
                                                <button class="botaoEntrar">Entrar</button>
                                                <p>Não tem uma conta? <b><a onclick="abrirCadastro()"><u>Clique
                                                                aqui</u></a></b> para Cadastrar</p>
                                            </div>
                                        </div>
                                        <div class="imgLogin">
                                            <span class="popup_fechar_login">&times;</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- fim do login -->
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="texto_pai">
                <div class="text_banner">
                    <h1>Sobre Nós</h1>
                </div>
            </div>
        </div>
    </header>

    <div class="personagem">
        <div class="container">
            <div class="tudo_aba">
                <div class="texto_sophie">
                    <h1>Sophie Hatter</h1>
                    <p>É uma jovem de 18 anos amaldiçõada pela Bruxa das Terras Abandonadas, e ganha uma aparência que
                        condiz com a idade de sua alma.</p>
                    <p>Ela se torna uma velha de 90 anos por não ter alegria ao viver.</p>
                    <p>Devido ao seu amor por Howl, a aparência geriátrica de Sophie diminui dependendo de seu estado
                        emocional.</p>
                    <p>Ao defender Howl para Suliman, Sophie recupera brevemente sua aparência original.</p>
                </div>
                <div class="foto_sophie">
                </div>
            </div>
        </div>
    </div>

    <div class="personalidade">
        <div class="container">
            <div class="content">
                <div class="texto">
                    <div class="titulo">
                        <h1>Nossa Personalidade</h1>
                        <p>Passe o mouse em cima para verificar</p>
                    </div>
                </div>
                <div class="caixas">
                    <div class="caixa" onmouseout="naoDizer1()" onmouseover="dizerAlgo1()">
                        <div class="img">
                            <img src="CSS/assets/valores3.png">
                        </div>
                        <div id="txt1"></div>
                    </div>
                    <div class="caixa" onmouseout="naoDizer2()" onmouseover="dizerAlgo2()">
                        <div class="img">
                            <img src="CSS/assets/valores1.png">
                        </div>
                        <div id="txt2"></div>
                    </div>
                    <div class="caixa" onmouseout="naoDizer3()" onmouseover="dizerAlgo3()">
                        <div class="img">
                            <img src="CSS/assets/valores2.png">
                        </div>
                        <div id="txt3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- FOOTER -->
    <div class="footer">
        <div class="caixa_verde">
            <div class="info">
                <p>Developed by Mariana Namie</p>
            </div>
        </div>
    </div>
</body>

</html>

<script>

    function naoDizer1() {
        txt1.style.display = 'none';
    }
    function dizerAlgo1() {
        txt1.innerHTML = `Gosta de ser gentil`;
        txt1.style.display = 'block';
        txt1.style.fontSize = '25px';
        txt1.style.color = '#50ADBF';
        txt1.style.fontFamily = 'Josefin Sans';
        txt1.style.textAlign = 'center';
        txt1.style.width = '200px';
    }

    function naoDizer2() {
        txt2.style.display = 'none';
    }
    function dizerAlgo2() {
        txt2.innerHTML = `Não gosta de ser o centro das atenções`;
        txt2.style.display = 'block';
        txt2.style.fontSize = '25px';
        txt2.style.color = '#50ADBF';
        txt2.style.fontFamily = 'Josefin Sans';
        txt2.style.textAlign = 'center';
        txt2.style.width = '200px';
    }

    function naoDizer3() {
        txt3.style.display = 'none';
    }
    function dizerAlgo3() {
        txt3.innerHTML = `Age como uma pessoa mais velha`;
        txt3.style.display = 'block';
        txt3.style.fontSize = '25px';
        txt3.style.color = '#50ADBF';
        txt3.style.fontFamily = 'Josefin Sans';
        txt3.style.textAlign = 'center';
        txt3.style.width = '200px';
    }

    // popup
    var popup = document.getElementById('popup_fundo');
    // abrir o popup
    var botao = document.getElementById('popup_botao');
    // botao fechar
    var popup_fechar = document.getElementsByClassName('popup_fechar')[0];

    // abrir com clique
    botao.addEventListener('click', abrirPopup);

    // fechar com clique no botao
    popup_fechar.addEventListener('click', fecharPopup);

    // fechar com clique fora do popup
    window.addEventListener('click', fecharFora);

    // função para abrir com o clique
    function abrirPopup() {
        popup.style.display = 'block';
        inp_nome.value = "";
        inp_sobrenome.value = "";
        inp_email.value = "";
        inp_senha.value = "";
        inp_confirmacao.value = "";
    }

    // função para fechar popup com o clique no botão
    function fecharPopup() {
        popup.style.display = 'none';
    }

    // função para fechar popup se clicar fora
    function fecharFora(e) {
        if (e.target == popup) {
            popup.style.display = 'none';
        }
    }

    var popupLogin = document.getElementById('popup_fundo_login');

    var popup_fechar_login = document.getElementsByClassName('popup_fechar_login')[0];

    popup_fechar_login.addEventListener('click', fecharPopupLogin);

    window.addEventListener('click', fecharForaLogin);

    function abrirLogin() {
        popup.style.display = 'none';
        popupLogin.style.display = 'block';
        inp_email1.value = "";
        inp_senha1.value = "";
    }

    function fecharPopupLogin() {
        popupLogin.style.display = 'none';
    }

    function fecharForaLogin(e) {
        if (e.target == popupLogin) {
            popupLogin.style.display = 'none';
        }
    }

    function abrirCadastro() {
        popupLogin.style.display = 'none';
        popup.style.display = 'block';
    }
</script>
<!-- cadastro -->
<script>
    function cadastrar() {

        var nomeVar = inp_nome.value;
        var sobrenomeVar = inp_sobrenome.value;
        var emailVar = inp_email.value;
        var senhaVar = inp_senha.value;
        var confirmacaoVar = inp_confirmacao.value;

        if (nomeVar == "") {
            alerta_erro.innerHTML = `<span style="color:red">* Preencha o nome para Cadasatrar</span>`;
            inp_nome.style = "border-bottom: solid 2px red;";
        } else if (sobrenomeVar == "") {
            alerta_erro.innerHTML = `<span style="color:red">* Preencha o sobrenome para Cadasatrar</span>`
            inp_sobrenome.style = "border-bottom: solid 2px red;";
        } else if (emailVar == "") {
            alerta_erro.innerHTML = `<span style="color:red">* Preencha o email para Cadasatrar</span>`
            inp_email.style = "border-bottom: solid 2px red;";
        } else if (senhaVar == "") {
            alerta_erro.innerHTML = `<span style="color:red">* Preencha a senha para Cadasatrar</span>`
            inp_senha.style = "border-bottom: solid 2px red;";
        } else if (confirmacaoVar == "") {
            alerta_erro.innerHTML = `<span style="color:red">* Preencha a senha para Cadasatrar</span>`
            inp_confirmacao = "border-bottom: solid 2px red;";
        } else if (senhaVar != confirmacaoVar) {
            alerta_erro.innerHTML = `<span style="color:red">* A confirmação de senha deve ser igual a senha</span>`
        } else {
            fetch("/usuarios/cadastrar", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    nomeServer: nomeVar,
                    sobrenomeServer: sobrenomeVar,
                    emailServer: emailVar,
                    senhaServer: senhaVar
                })
            }).then(function (resposta) {

                console.log("resposta: ", resposta);

                if (resposta.ok) {

                    setTimeout(() => {
                        abrirLogin();
                    }, "2000")

                    limparFormulario();
                } else {
                    throw ("Houve um erro ao tentar realizar o cadastro!");
                }
            }).catch(function (resposta) {
            });

            return false;

        }

    }

    function sem_borda() {
        inp_nome.style = "border-bottom: solid 2px grey;";
        inp_sobrenome.style = "border-bottom: solid 2px grey;";
        inp_email.style = "border-bottom: solid 2px grey;";
        inp_senha.style = "border-bottom: solid 2px grey;";
        inp_confirmacao.style = "border-bottom: solid 2px grey;";
        inp_email1.style = "border-bottom: solid 2px grey;";
        inp_senha1.style = "border-bottom: solid 2px grey;";
    }
</script>
<!-- login -->
<script>
    function entrar() {

        var emailVar = inp_email1.value;
        var senhaVar = inp_senha1.value;

        if (emailVar == "" || senhaVar == "") {
            alert(`Preencha todos os campos`)
            return false;
        }

        console.log("FORM LOGIN: ", emailVar);
        console.log("FORM SENHA: ", senhaVar);

        fetch("/usuarios/autenticar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                emailServer: emailVar,
                senhaServer: senhaVar
            })
        }).then(function (resposta) {
            console.log("ESTOU NO THEN DO entrar()!")

            if (resposta.ok) {
                console.log(resposta);

                resposta.json().then(json => {
                    console.log(json);
                    console.log(JSON.stringify(json));

                    sessionStorage.EMAIL_USUARIO = json.email;
                    sessionStorage.NOME_USUARIO = json.nome;
                    sessionStorage.ID_USUARIO = json.idUsuario;

                    setTimeout(function () {
                        console.log("cheguei ate aqui")
                        window.location = "interacao.html";
                    }, 1000); // apenas para exibir o loading

                });

            } else {

                console.log("Houve um erro ao tentar realizar o login!");

                resposta.text().then(texto => {
                    console.error(texto);
                });
            }

        }).catch(function (erro) {
            console.log(erro);
        })

        return false;
    }
</script>